#!/usr/bin/env ruby

# require 'pry'
require 'json'
require 'eventmachine'
# require 'byebug'

require_relative '../lib/services/slack'
require_relative '../lib/services/session'
# require_relative '../lib/lazychess/game'
Dir["./lib/lazychess/*.rb"].each {|file| require file }
Dir["./lib/concepts/*.rb"].each {|file| require file }
Dir["./lib/services/*.rb"].each {|file| require file }


current_player = :white
game = Game.new

puts "Time to play some mafakan chess!!"
puts "White begins:"


  until game.has_been_won? do
    begin
    puts BoardPrinter.new.print(game.board)
    puts "Enter move:"
    move = gets.chomp
    game.board.move(current_player, move)

    current_player == :white ? current_player = :black : current_player = :white

    puts "#{current_player}'s move:"
    rescue Piece::IllegalMoveError
      puts "That's an illegal move"
    end
  end
